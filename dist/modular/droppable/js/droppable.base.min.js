function Droppable(a,arguments){var b=this,c=gj.droppable.methods;return b.isOver=!1,b.isDragging=!1,b.destroy=function(){return c.destroy(this)},b.isOver=function(a){return c.isOver(this,a)},$.extend(a,b),"true"!==a.attr("data-droppable")&&c.init.apply(a,arguments),a}"undefined"==typeof gj&&(gj={}),"undefined"==typeof gj.droppable&&(gj.droppable={}),gj.droppable.config={hoverClass:void 0},gj.droppable.methods={init:function(a){var b,c=this;a||(a={}),a.guid||(a.guid=gj.widget.generateGUID());for(b in a)gj.droppable.events.hasOwnProperty(b)&&(c.on(b,a[b]),delete a[b]);return c.data(a),c.attr("data-guid",c.data("guid")),gj.documentManager.subscribeForEvent("mousedown",c.data("guid"),gj.droppable.methods.createMouseDownHandler(c)),gj.documentManager.subscribeForEvent("mousemove",c.data("guid"),gj.droppable.methods.createMouseMoveHandler(c)),gj.documentManager.subscribeForEvent("mouseup",c.data("guid"),gj.droppable.methods.createMouseUpHandler(c)),c.attr("data-droppable",!0),c},createMouseDownHandler:function(a){return function(b){a.isDragging=!0}},createMouseMoveHandler:function(a){return function(b){if(a.isDragging){var c=a.data("hoverClass"),d=gj.droppable.methods.isOver(a,b);d!=a.isOver&&(d?(c&&a.addClass(c),gj.droppable.events.over(a)):(c&&a.removeClass(c),gj.droppable.events.out(a))),a.isOver=d}}},createMouseUpHandler:function(a){return function(b){a.isDragging=!1,gj.droppable.methods.isOver(a,b)&&gj.droppable.events.drop(a)}},isOver:function(a,b){var c=gj.droppable.methods.mouseX(b),d=gj.droppable.methods.mouseY(b),e=a.offset();return c>e.left&&c<e.left+a.width()&&d>e.top&&d<e.top+a.height()},mouseX:function(a){if(a){if(a.pageX)return a.pageX;if(a.clientX)return a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)}return null},mouseY:function(a){if(a){if(a.pageY)return a.pageY;if(a.clientY)return a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}return null},destroy:function(a){return"true"===a.attr("data-droppable")&&(gj.documentManager.unsubscribeForEvent("mousedown",a.data("guid")),gj.documentManager.unsubscribeForEvent("mousemove",a.data("guid")),gj.documentManager.unsubscribeForEvent("mouseup",a.data("guid")),a.removeData(),a.removeAttr("data-guid"),a.removeAttr("data-droppable"),a.off("drop").off("over").off("out")),a}},gj.droppable.events={drop:function(a,b,c){a.trigger("drop",[{top:c,left:b}])},over:function(a){a.trigger("over")},out:function(a){a.trigger("out")}},function(a){a.fn.droppable=function(a){var b;if("object"!=typeof a&&a){if(b=new Droppable(this,null),b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+a+" does not exist."}return new Droppable(this,arguments)}}(jQuery);