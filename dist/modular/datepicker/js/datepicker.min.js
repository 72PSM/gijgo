"undefined"==typeof gj&&(gj={}),gj.widget=function(){var a=this;a.xhr=null,a.generateGUID=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},a.mouseX=function(a){if(a){if(a.pageX)return a.pageX;if(a.clientX)return a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);if(a.touches&&a.touches.length)return a.touches[0].pageX;if(a.changedTouches&&a.changedTouches.length)return a.changedTouches[0].pageX;if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches[0].pageX;if(a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.touches[0].pageX}return null},a.mouseY=function(a){if(a){if(a.pageY)return a.pageY;if(a.clientY)return a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);if(a.touches&&a.touches.length)return a.touches[0].pageY;if(a.changedTouches&&a.changedTouches.length)return a.changedTouches[0].pageY;if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches[0].pageY;if(a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.touches[0].pageY}return null}},gj.widget.prototype.init=function(a,b){var c,d,e;this.attr("data-type",b),d=$.extend(!0,{},this.getHTMLConfig()||{}),$.extend(!0,d,a||{}),e=this.getConfig(d,b),this.attr("data-guid",e.guid),this.data(e);for(c in e)gj[b].events.hasOwnProperty(c)&&(this.on(c,e[c]),delete e[c]);for(plugin in gj[b].plugins)gj[b].plugins.hasOwnProperty(plugin)&&gj[b].plugins[plugin].configure(this,e,d);return this},gj.widget.prototype.getConfig=function(a,b){var c,d,e,f;c=$.extend(!0,{},gj[b].config.base),d=a.hasOwnProperty("uiLibrary")?a.uiLibrary:c.uiLibrary,gj[b].config[d]&&$.extend(!0,c,gj[b].config[d]),e=a.hasOwnProperty("iconsLibrary")?a.iconsLibrary:c.iconsLibrary,gj[b].config[e]&&$.extend(!0,c,gj[b].config[e]);for(f in gj[b].plugins)gj[b].plugins.hasOwnProperty(f)&&($.extend(!0,c,gj[b].plugins[f].config.base),gj[b].plugins[f].config[d]&&$.extend(!0,c,gj[b].plugins[f].config[d]),gj[b].plugins[f].config[e]&&$.extend(!0,c,gj[b].plugins[f].config[e]));return $.extend(!0,c,a),c.guid||(c.guid=this.generateGUID()),c},gj.widget.prototype.getHTMLConfig=function(){var a=this.data(),b=this[0].attributes;return b.width&&(a.width=b.width.nodeValue),b.height&&(a.height=b.height.nodeValue),b.align&&(a.align=b.align.nodeValue),a&&a.source&&(a.dataSource=a.source,delete a.source),a},gj.widget.prototype.createDoneHandler=function(){var a=this;return function(b){"string"==typeof b&&JSON&&(b=JSON.parse(b)),gj[a.data("type")].methods.render(a,b)}},gj.widget.prototype.createErrorHandler=function(){return function(a){a&&a.statusText&&"abort"!==a.statusText&&alert(a.statusText)}},gj.widget.prototype.reload=function(a){var b,c,d=this.data(),e=this.data("type");return void 0===d.dataSource&&gj[e].methods.useHtmlDataSource(this,d),$.extend(d.params,a),$.isArray(d.dataSource)?(c=gj[e].methods.filter(this),gj[e].methods.render(this,c)):"string"==typeof d.dataSource?(b={url:d.dataSource,data:d.params},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(b).done(this.createDoneHandler()).fail(this.createErrorHandler())):"object"==typeof d.dataSource&&(d.dataSource.data||(d.dataSource.data={}),$.extend(d.dataSource.data,d.params),b=$.extend(!0,{},d.dataSource),"json"===b.dataType&&"object"==typeof b.data&&(b.data=JSON.stringify(b.data)),b.success||(b.success=this.createDoneHandler()),b.error||(b.error=this.createErrorHandler()),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(b)),this},gj.documentManager={events:{},subscribeForEvent:function(a,b,c){if(gj.documentManager.events[a]&&0!==gj.documentManager.events[a].length){if(gj.documentManager.events[a][b])throw"Event "+a+" for widget with guid='"+b+"' is already attached.";gj.documentManager.events[a].push({widgetId:b,callback:c})}else gj.documentManager.events[a]=[{widgetId:b,callback:c}],$(document).on(a,gj.documentManager.executeCallbacks)},executeCallbacks:function(a){var b=gj.documentManager.events[a.type];if(b)for(var c=0;c<b.length;c++)b[c].callback(a)},unsubscribeForEvent:function(a,b){var c=!1,d=gj.documentManager.events[a];if(d)for(var e=0;e<d.length;e++)d[e].widgetId===b&&(d.splice(e,1),c=!0,0===d.length&&($(document).off(a),delete gj.documentManager.events[a]));if(!c)throw'The "'+a+'" for widget with guid="'+b+"\" can't be removed."}},"undefined"==typeof gj.datepicker&&(gj.datepicker={plugins:{}}),gj.datepicker.config={base:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekDays:["S","M","T","W","T","F","S"],showOtherMonths:!1,selectOtherMonths:!0,min:void 0,max:void 0,format:void 0,uiLibrary:"materialdesign",iconsLibrary:"materialicons",icons:{calendar:'<i class="material-icons">event</i>',previousMonth:'<i class="material-icons">keyboard_arrow_left</i>',nextMonth:'<i class="material-icons">keyboard_arrow_right</i>'},indentation:24,style:{wrapper:"gj-datepicker gj-datepicker-md gj-unselectable",input:"gj-textbox-md"}},bootstrap:{indentation:24,style:{wrapper:"gj-datepicker gj-datepicker-bootstrap gj-datepicker-bootstrap-3 gj-unselectable",presenter:"btn btn-default",list:"gj-list gj-list-bootstrap list-group",item:"list-group-item",active:"active"},iconsLibrary:"glyphicons",optionsDisplay:"standard"},bootstrap4:{indentation:24,style:{wrapper:"gj-datepicker gj-datepicker-bootstrap gj-datepicker-bootstrap-4 gj-unselectable",presenter:"btn btn-secondary",list:"gj-list gj-list-bootstrap list-group",item:"list-group-item",active:"active"},optionsDisplay:"standard"},materialicons:{indentation:24,style:{expander:"gj-datepicker-expander-mi"}},fontawesome:{icons:{datepicker:'<i class="fa fa-calendar" aria-hidden="true"></i>'},style:{expander:"gj-datepicker-expander-fa"}},glyphicons:{icons:{datepicker:'<span class="glyphicon glyphicon-calendar"></span>'},style:{expander:"gj-datepicker-expander-glyphicons"}}},gj.datepicker.methods={init:function(a){return gj.widget.prototype.init.call(this,a,"datepicker"),this.attr("data-datepicker","true"),gj.datepicker.methods.initialize(this),this},initialize:function(a){var b,c=a.data(),d=a.parent('div[role="wrapper"]'),e=$(c.icons.calendar).attr("role","calendar-icon");0===d.length?(d=$('<div role="wrapper" />').addClass(c.style.wrapper),a.wrap(d)):d.addClass(c.style.wrapper),d=a.parent('div[role="wrapper"]'),c.width&&d.css("width",c.width),a.addClass(c.style.input),e.on("click",function(){gj.datepicker.methods.renderCalendar(a),gj.datepicker.methods.open(a)}),d.append(e),b=gj.datepicker.methods.createCalendar(a),d.append(b)},createCalendar:function(a){var b=new Date,c=a.data(),d=$('<div role="calendar" />'),e=$("<table/>"),f=$("<thead/>");for(a.attr("month",b.getMonth()),a.attr("year",b.getFullYear()),$row=$('<tr role="month-manager" />'),$row.append($("<th><div>"+c.icons.previousMonth+"</div></th>").on("click",gj.datepicker.methods.prevMonth(a))),$row.append('<th colspan="5"><div role="month"></div></th>'),$row.append($("<th><div>"+c.icons.nextMonth+"</div></th>").on("click",gj.datepicker.methods.nextMonth(a))),f.append($row),$row=$('<tr role="week-days" />'),i=0;i<c.weekDays.length;i++)$row.append("<th><div>"+c.weekDays[i]+"</div></th>");return f.append($row),e.append(f),e.append("<tbody/>"),d.append(e),d.hide(),d},renderCalendar:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a.data(),p=a.parent().children('[role="calendar"]'),q=p.children("table"),r=q.children("tbody");for(c=parseInt(a.attr("day"),10),d=parseInt(a.attr("month"),10),e=parseInt(a.attr("year"),10),q.find('thead [role="month"]').text(o.months[d]+" "+e),f=new Array(31,28,31,30,31,30,31,31,30,31,30,31),e%4==0&&1900!=e&&(f[1]=29),g=f[d],h=new Date(e+"-"+(d+1)+"-01").getDay(),r.empty(),b=0,$row=$("<tr />"),k=gj.datepicker.methods.getPrevMonth(d,e),i=1;h>=i;i++)m=$('<td type="other-month" />'),n=$("<div>"+(f[k.month]-h+i)+"</div>"),o.showOtherMonths&&(m.append(n),selectOtherMonths&&n.on("click",gj.datepicker.methods.select(a,p,i,k.month,k.year))),$row.append(m),b++;for(r.append($row),j=new Date,i=1;g>=i;i++)0==b&&($row=$("<tr>")),n=$("<div>"+i+"</div>"),n.on("click",gj.datepicker.methods.select(a,p,i,d,e)),m=c===i?$('<td type="selected" />'):e===j.getFullYear()&&d===j.getMonth()&&i===j.getDate()?$('<td type="today" />'):$('<td type="current-month" />'),m.append(n),$row.append(m),b++,7==b&&(r.append($row),b=0);for(l=gj.datepicker.methods.getNextMonth(d,e),i=1;0!=b;i++)m=$('<td type="other-month" />'),o.showOtherMonths&&(n=$("<div>"+i+"</div>"),m.append(n),selectOtherMonths&&n.on("click",gj.datepicker.methods.select(a,p,i,l.month,l.year))),$row.append(m),b++,7==b&&(r.append($row),b=0)},getPrevMonth:function(a,b){return date=new Date(b+"-"+(a+1)+"-01"),date.setMonth(date.getMonth()-1),{month:date.getMonth(),year:date.getFullYear()}},getNextMonth:function(a,b){return date=new Date(b+"-"+(a+1)+"-01"),date.setMonth(date.getMonth()+1),{month:date.getMonth(),year:date.getFullYear()}},prevMonth:function(a){return function(){var b,c=parseInt(a.attr("month"),10),d=parseInt(a.attr("year"),10);b=gj.datepicker.methods.getPrevMonth(c,d),a.attr("month",b.month),a.attr("year",b.year),gj.datepicker.methods.renderCalendar(a)}},nextMonth:function(a){return function(){var b,c=parseInt(a.attr("month"),10),d=parseInt(a.attr("year"),10);b=gj.datepicker.methods.getNextMonth(c,d),a.attr("month",b.month),a.attr("year",b.year),gj.datepicker.methods.renderCalendar(a)}},select:function(a,b,c,d,e){return function(f){var g,h,i=a.data();g=new Date(e+"-"+(d+1)+"-"+c),h=i.format?i.format(g):g.toLocaleDateString(),a.val(h),a.attr("day",c),a.attr("month",d),a.attr("year",e),b.hide()}},open:function(a){var b=(a.data(),a.parent().children('[role="calendar"]'));b.css("left","0px").css("top",a.outerHeight(!0)+3),b.show(),gj.datepicker.events.open(a)},destroy:function(a){var b=a.data();return b&&(a.off(),a.removeData(),a.removeAttr("data-type").removeAttr("data-guid").removeAttr("data-datepicker"),a.removeClass()),$tree}},gj.datepicker.events={change:function(a){return a.triggerHandler("change")},open:function(a){return a.triggerHandler("dataBound")},close:function(a){return a.triggerHandler("dataBound")}},gj.datepicker.widget=function(a,b){var c=this,d=gj.datepicker.methods;return c.open=function(a){return d.value(this,a)},c.close=function(){return d.enable(this)},c.destroy=function(){return d.destroy(this)},$.extend(a,c),"true"!==a.attr("data-datepicker")&&d.init.call(a,b),a},gj.datepicker.widget.prototype=new gj.widget,gj.datepicker.widget.constructor=gj.datepicker.widget,function(a){a.fn.datepicker=function(a){var b;if(this&&this.length){if("object"!=typeof a&&a){if(b=new gj.datepicker.widget(this,null),b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+a+" does not exist."}return new gj.datepicker.widget(this,a)}}}(jQuery);