"undefined"==typeof gj&&(gj={}),"undefined"==typeof gj.draggable&&(gj.draggable={}),gj.draggable.config={base:{handle:void 0,vertical:!0,horizontal:!0}},gj.draggable.methods={init:function(a){var b,c=this;return gj.widget.prototype.init.call(this,a,"draggable"),b=gj.draggable.methods.getHandleElement(c),b.on("mousedown",function(a){c.attr("data-draggable-dragging",!0),c.removeAttr("data-draggable-x"),c.removeAttr("data-draggable-y"),"aboslute"!==c.css("position")&&c.css("position","absolute"),gj.documentManager.subscribeForEvent("mousemove",c.data("guid"),gj.draggable.methods.createMouseMoveHandler(c))}),gj.documentManager.subscribeForEvent("mouseup",c.data("guid"),gj.draggable.methods.createMouseUpHandler(c)),c},getHandleElement:function(a){var b=a.data("handle");return b&&b.length?b:a},createMouseUpHandler:function(a){return function(){"true"===a.attr("data-draggable-dragging")&&(a.attr("data-draggable-dragging",!1),gj.documentManager.unsubscribeForEvent("mousemove",a.data("guid")),gj.draggable.events.stop(a))}},createMouseMoveHandler:function(a){return function(b){var c,d,e,f,g,h;"true"===a.attr("data-draggable-dragging")&&(c=gj.draggable.methods.mouseX(b),d=gj.draggable.methods.mouseY(b),g=a.attr("data-draggable-x"),h=a.attr("data-draggable-y"),g&&h?(e=a.data("horizontal")?c-parseInt(g,10):0,f=a.data("vertical")?d-parseInt(h,10):0,!1!==gj.draggable.events.drag(a,e,f)&&gj.draggable.methods.move(a,e,f)):gj.draggable.events.start(a),a.attr("data-draggable-x",c),a.attr("data-draggable-y",d))}},move:function(a,b,c){var d=a.get(0),e=d.style.top?parseInt(d.style.top):a.position().top,f=d.style.left?parseInt(d.style.left):a.position().left;d.style.top=e+c+"px",d.style.left=f+b+"px"},mouseX:function(a){if(a){if(a.pageX)return a.pageX;if(a.clientX)return a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)}return null},mouseY:function(a){if(a){if(a.pageY)return a.pageY;if(a.clientY)return a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}return null},destroy:function(a){return"true"===a.attr("data-draggable")&&(gj.documentManager.unsubscribeForEvent("mouseup",a.data("guid")),a.removeData(),a.removeAttr("data-guid"),a.removeAttr("data-draggable"),a.off("drag").off("start").off("stop"),gj.draggable.methods.getClickElement(a).off("mousedown")),a}},gj.draggable.events={drag:function(a,b,c){return a.triggerHandler("drag",[{top:c,left:b}])},start:function(a){a.triggerHandler("start")},stop:function(a){a.triggerHandler("stop")}},gj.draggable.widget=function(a,arguments){var b=this,c=gj.draggable.methods;return b.destroy=function(){return c.destroy(this)},$.extend(a,b),"true"!==a.attr("data-draggable")&&c.init.apply(a,arguments),a},gj.draggable.widget.prototype=new gj.widget,gj.draggable.widget.constructor=gj.draggable.widget,function(a){a.fn.draggable=function(a){var b;if("object"!=typeof a&&a){if(b=new gj.draggable.widget(this,null),b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+a+" does not exist."}return new gj.draggable.widget(this,arguments)}}(jQuery);