function Draggable(a,arguments){var b=this,c=gj.draggable.methods;return b.isDragging=!1,b.prevX=void 0,b.prevY=void 0,b.destroy=function(){return c.destroy(this)},$.extend(a,b),"true"!==a.attr("data-draggable")&&c.init.apply(a,arguments),a}"undefined"==typeof gj&&(gj={}),"undefined"==typeof gj.draggable&&(gj.draggable={}),gj.draggable.config={handle:void 0},gj.draggable.methods={init:function(a){var b,c=this;a||(a={}),a.guid||(a.guid=gj.widget.generateGUID());for(option in a)gj.draggable.events.hasOwnProperty(option)&&(c.on(option,a[option]),delete a[option]);return c.data(a),b=gj.draggable.methods.getClickElement(c),b.on("mousedown",function(a){c.isDragging=!0,c.prevX=void 0,c.prevY=void 0,"aboslute"!==c.css("position")&&c.css("position","absolute"),gj.documentManager.subscribeForEvent("mousemove",c.data("guid"),gj.draggable.methods.createMouseMoveHandler(c))}),gj.documentManager.subscribeForEvent("mouseup",c.data("guid"),gj.draggable.methods.createMouseUpHandler(c)),c.attr("data-draggable",!0),c},getClickElement:function(a){var b,c=a.data("handle");return b=c&&c.length?c:a},createMouseUpHandler:function(a){return function(b){a.isDragging&&(a.isDragging=!1,gj.documentManager.unsubscribeForEvent("mousemove",a.data("guid")),gj.draggable.events.stop(a,b))}},createMouseMoveHandler:function(a){return function(b){var c,d,e,f;a.isDragging&&(c=gj.draggable.methods.mouseX(b),d=gj.draggable.methods.mouseY(b),a.prevX&&a.prevY?(e=c-a.prevX,f=d-a.prevY,gj.draggable.methods.move(a,e,f),gj.draggable.events.drag(a,e,f)):gj.draggable.events.start(a),a.prevX=c,a.prevY=d)}},move:function(a,b,c){var d=a.get(0),e=d.style.top?parseInt(d.style.top):a.position().top,f=d.style.left?parseInt(d.style.left):a.position().left;d.style.top=e+c+"px",d.style.left=f+b+"px"},mouseX:function(a){if(a){if(a.pageX)return a.pageX;if(a.clientX)return a.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)}return null},mouseY:function(a){if(a){if(a.pageY)return a.pageY;if(a.clientY)return a.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}return null},destroy:function(a){return"true"===a.attr("data-draggable")&&(gj.documentManager.unsubscribeForEvent("mousemove",a.data("guid")),gj.documentManager.unsubscribeForEvent("mouseup",a.data("guid")),a.removeData(),a.removeAttr("data-draggable"),gj.draggable.methods.getClickElement(a).off("mousedown")),a}},gj.draggable.events={drag:function(a,b,c){a.trigger("drag",[{top:c,left:b}])},start:function(a){a.trigger("start")},stop:function(a,b){a.trigger("stop",[b])}},function(a){a.fn.draggable=function(a){if("object"!=typeof a&&a){if(gj.draggable.methods[a])return gj.draggable.methods[a].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+a+" does not exist."}return new Draggable(this,arguments)}}(jQuery);