"undefined"==typeof gj&&(gj={}),"undefined"==typeof gj.tree&&(gj.tree={plugins:{}}),gj.tree.config={base:{autoLoad:!0,selectionType:"single",cascadeSelection:!1,dataSource:void 0,primaryKey:void 0,textField:"text",valueField:void 0,childrenField:"children",width:void 0,uiLibrary:"base",style:{wrapper:"gj-tree-unselectable",list:"gj-tree-list",item:"gj-tree-item",active:"gj-tree-base-active",leftSpacer:void 0,expander:"gj-tree-expander",display:"gj-tree-display",expandIcon:void 0,collapseIcon:void 0,leafIcon:void 0}},bootstrap:{style:{wrapper:"gj-tree-unselectable",list:"gj-bootstrap-tree-list list-group",item:"gj-bootstrap-tree-item list-group-item",active:"active",leftSpacer:"gj-tree-bootstrap-left-spacer",expander:"gj-tree-bootstrap-expander glyphicon",display:"gj-tree-bootstrap-display",expandIcon:"glyphicon-plus",collapseIcon:"glyphicon-minus",leafIcon:void 0}},jqueryui:{}},gj.tree.events={initialized:function(a){a.triggerHandler("initialized")},dataBinding:function(a){a.triggerHandler("dataBinding")},dataBound:function(a){a.triggerHandler("dataBound")},select:function(a,b,c,d){return a.triggerHandler("select",[b,c,d])},unselect:function(a,b,c,d){return a.triggerHandler("unselect",[b,c,d])},collapse:function(a,b,c,d){return a.triggerHandler("collapse",[b,c,d])},expand:function(a,b,c,d){return a.triggerHandler("expand",[b,c,d])},destroying:function(a){return a.triggerHandler("destroying")}},gj.tree.methods={init:function(a){return gj.widget.prototype.init.call(this,a,"tree"),gj.tree.methods.initialize.call(this),this.data("autoLoad")&&this.reload(),this},initialize:function(){var a=this.data(),b=$('<ul class="'+a.style.list+'"/>');this.empty().addClass(a.style.wrapper).append(b),a.width&&this.width(a.width),gj.tree.events.initialized(this)},render:function(a,b){var c,d=a.children("ul");for(gj.tree.events.dataBinding(a),d.off().empty(),c=0;c<b.length;c++)gj.tree.methods.appendNode(a,d,b[c],1);return gj.tree.events.dataBound(a),a},appendNode:function(a,b,c,d){var e,f,g,h=a.data(),f=$("<li/>").addClass(h.style.item),i=$('<span data-role="expander" data-mode="close"></span>'),j=$('<span data-role="display">'+c[h.textField]+"</span>");if(h.style.leftSpacer)for(e=1;d>e;e++)f.append('<span data-role="spacer" class="'+h.style.leftSpacer+'"></span>');if(i.addClass(h.style.expander).on("click",gj.tree.methods.expanderClickHandler(a)),f.append(i),j.addClass(h.style.display).on("click",gj.tree.methods.displayClickHandler(a)),f.append(j),c[h.childrenField]&&c[h.childrenField].length)for(h.style.expandIcon?i.addClass(h.style.expandIcon):i.text("+"),g=$("<ul />").addClass(h.style.list).addClass("gj-hidden"),f.append(g),e=0;e<c[h.childrenField].length;e++)gj.tree.methods.appendNode(a,g,c[h.childrenField][e],d+1);else h.style.leafIcon?i.addClass(h.style.leafIcon):i.html("&nbsp;");b.append(f)},expanderClickHandler:function(a){return function(b){var c=$(this),d=c.siblings("ul"),e=c.parent("li"),f=a.data(),g=gj.tree.events;"close"===c.attr("data-mode")&&g.expand(a,e)!==!1?(d.show(),c.attr("data-mode","open"),f.style.collapseIcon?c.removeClass(f.style.expandIcon).addClass(f.style.collapseIcon):c.text("-")):g.collapse(a,e)!==!1&&(d.hide(),c.attr("data-mode","close"),f.style.expandIcon?c.removeClass(f.style.collapseIcon).addClass(f.style.expandIcon):c.text("+"))}},displayClickHandler:function(a){return function(b){var c=$(this),d=c.parent("li"),e=a.data().cascadeSelection;"true"===d.attr("data-selected")?gj.tree.methods.unselect(a,d,e):("single"===a.data("selectionType")&&gj.tree.methods.unselectAll(a),gj.tree.methods.select(a,d,e))}},selectAll:function(a){var b,c=a.find("ul li");for(b=0;b<c.length;b++)gj.tree.methods.select(a,$(c[b]),!0);return a},select:function(a,b,c){var d,e,f=a.data();if("true"!==b.attr("data-selected")&&gj.tree.events.select(a,b)!==!1&&(b.addClass(f.style.active).attr("data-selected","true"),c))for(e=b.find("ul li"),d=0;d<e.length;d++)gj.tree.methods.select(a,$(e[d]),c)},unselectAll:function(a){var b,c=a.find("ul li");for(b=0;b<c.length;b++)gj.tree.methods.unselect(a,$(c[b]),!0);return a},unselect:function(a,b,c){var d,e;a.data();if("true"===b.attr("data-selected")&&gj.tree.events.unselect(a,b)!==!1&&(b.removeClass(a.data().style.active).removeAttr("data-selected"),c))for(e=b.find("ul li"),d=0;d<e.length;d++)gj.tree.methods.unselect(a,$(e[d]),c)}},gj.tree.widget=function(a,arguments){var b=this,c=gj.tree.methods;return b.reload=function(a){return gj.widget.prototype.reload.call(this,a)},b.render=function(a){return c.render(this,a)},b.appendNode=function(a,b){},b.prependNode=function(a,b){},b.expand=function(a){},b.collapse=function(a){},b.expandAll=function(){},b.collapseAll=function(){},b.getById=function(a){},b.getByText=function(a){},b.remove=function(a){},b.destroy=function(){},b.select=function(a){},b.unselect=function(a){},b.selectAll=function(){return c.selectAll(this)},b.unselectAll=function(){return c.unselectAll(this)},b.getSelection=function(){},$.extend(a,b),"true"!==a.attr("data-tree")&&c.init.apply(a,arguments),a},gj.tree.widget.prototype=new gj.widget,gj.tree.widget.constructor=gj.tree.widget,function(a){a.fn.tree=function(a){var b;if("object"!=typeof a&&a){if(b=new gj.tree.widget(this,null),b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+a+" does not exist."}return new gj.tree.widget(this,arguments)}}(jQuery);